细数使用Hi-net数据遇到的坑
##########################

:date: 2014-04-27 13:55
:author: SeisMan
:category: 胡言乱语
:tags: 数据, Hinet, 台网, 申请, 仪器响应
:slug: traps-using-hinet-data

Hi-net是日本的一个高精度密集台网，整个日本境内大概有800个台站，台间距约为20km。Hi-net的数据质量很高，很适合做科学研究。

用了接近一年的Hi-net数据，遇到了不少坑，这里总（吐）结（槽）一下。

#. 原网站是日文版，大概于2012年制作了英文测试版，两年多过去了，还是测试版，不知道是在测试服务器，还是英文化没有完成；
#. 申请数据时遇到的坑

   #. 选择台站时会弹出窗口，需要浏览器支持Java插件方可使用；
   #. 没有批量下载的工具，必须鼠标点击选择机构、台网、数据起始时间（年、月、日、时、分）和数据长度；
   #. 单次申请，一个通道的数据长度不得长于60分钟；（其实这个还好，不算太坑）
   #. 数据文件后缀为cnt，每个文件包含了全部已选通道的一分钟的数据，这意味着如果一次申请所有通道的30分钟的数据，就需要下载30个文件；
   #. 当所有数据的总时间长度小于12000分钟时，Hi-net可以将多个分钟的数据文件打包压缩以方便下载。这大概相当于800个台站（2400个通道）5分钟的数据量。因此一般来说单次申请的数据长度不得超过5分钟。
   #. 一次申请结束之后需等待30秒到1分钟，等到此次申请处理完毕之后才可继续申请，否则会出现错误。
   #. 数据下载需要手动点击

#. 数据处理遇到的坑

   #. 数据不是常见格式，而是Hi-net自定义的win32格式，需要使用win32tools将其转换为SAC格式
   #. win32格式以及相关工具的说明文档是日文，且是euc-jp编码，花了我两个小时才找到方法转换成utf8编码，结果日文还是没看懂。
   #. 将cnt转换为SAC格式时，需要使用其提供的channel table文件。channel table文件包含了台站的通道信息，而channel table内有很多列，没有明确解释每一列的具体含义。
   #. 没有明确的仪器响应信息，似乎是要根据channel table以及其它信息为每个通道单独生成仪器响应文件，才可以去除仪器响应。

