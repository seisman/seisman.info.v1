PPK标记震相到时的一些注意事项
##############################

:date: 2013-08-20 00:22
:modified: 2016-02-28
:author: SeisMan
:category: SAC
:tags: 走时, 震相, SAC技巧
:slug: notes-of-ppk

SAC中的ppk命令用于拾取震相到时。在键入ppk命令之后，进入震相拾取模式，此时键入相应的选项即可拾取震相到时。从ppk的命令说明中可以看出，ppk支持的选项中与到时有关的有：

-  A：定义初至波到时；
-  F：定义事件结束时间；
-  P：定义P波到时；
-  S：定义S波到时；
-  Tn：用户自定义到时（n=0~9）；

在《\ `SAC的时间概念 <{filename}/SAC/2013-08-04_timing-of-sac.rst>`_\ 》一文中介绍了SAC中所有与时间有关的头段变量的一些细节。其中与标记到时有关的头段变量有：A、F、Tn。

将这二者做一比较，很容易猜到：ppk的A选项标记的到时信息保存到头段变量A中；F选项标记的到时保存到头段变量F中；Tn选项标记的到时保存到对应的头段变量Tn中。

**疑问：**\ ppk的P和S选项分别标记了P波到时和S波到时，那么着两个震相的到时保存到哪里了？

**答：**\ 经过简单的测试可以知道，P波到时信息保存到了头段变量A中；S波到时保存到头段变量T0中。

需要注意的是，使用ppk的P选项标定的到时一定保存到头段变量A中，不管原来头段变量A中有没有记录其他有用信息。同理，ppk的S选项标定的到时一定保存到头段变量T0中，不会因为头段变量T0中已经有值而保存到T1中。

**疑问：**\ 在用T0标记某震相（比如PcP）后，在使用p、p1、ppk绘图时，在相应时刻总是显示字符“T0”，如何显示震相名称“PcP”？

**答：**\ 如果熟知SAC的头段变量，这个问题很容易解决。A、F、Tn（n=0~9）每个浮点型头段变量都对应一个字符型头段变量，即KA、KF、KTn，这些字符型头段变量中可以保持震相名。

如下例所示::

    SAC> r file
    SAC> ppk
    # 用光标标记震相PcP的到时为T0，然后退出ppk模式
    SAC> p   # 此时看到的震相到时处显示字符"T0"
    SAC> ch kt0 PcP
    SAC> p   # 此时看到的震相到时处显示字符"PcP"
    SAC> wh  # 标记的到时要记得保存；
    SAC> q

**疑问：**\ ppk命令中设置震相onset、震相方向、震相质量的几个命令如何使用？这些标记的信息被保存在哪里？

**答：**\ ppk命令中，设置震相onset类型的有 ``e`` 和 ``i`` ，设置震相方向的有 ``d`` 、 ``u`` 、 ``+`` 、 ``-`` 和空格，设置震相质量的为0到4。这些命令仅在标记P波和S波到时时有意义，而这些震相信息则保存在对应时间标记名中。

首先读入一个SAC文件，进入ppk模式后，以标记P波为例，依次按下 ``e`` 、 ``d`` 、 ``1`` 、 ``p`` 四个按键，此时P波到时保存在变量A中，而变量KA中的值则是 ``EPD1`` 。

变量KA中的四个字符依次表示：震相onset类型、P或S震相、震相极性、震相质量。由于这些信息是保存在头段变量KA中的，因而会写入到文件中，以待进一步使用。

修订历史
========

- 2013-08-20：初稿；
- 2016-02-28：增加了对震相onset类型、震相极性、震相质量相关命令的说明；
