仪器响应文件RESP
################

:date: 2013-06-27 13:37
:author: SeisMan
:category: 地震学基础
:tags: 仪器响应
:slug: simple-analysis-of-resp
:summary: 分析RESP文件的格式及含义。
:depends: mathjax

.. contents::

《\ `仪器响应的物理细节 <{filename}/SeisBasic/2013-06-26_physical-details-of-instrumental-response.rst>`_\ 》一文中说过，理论上仪器响应是由三个阶段构成的。常用的仪器响应格式包括SEED的RESP文件以及SAC的PZ文件。这里通过阅读一个RESP类型的仪器响应文件，来更进一步的理解仪器响应，顺便熟悉一下SEED格式。

由于RESP的内容太长，就不在博文中贴出，本文所使用的RESP文件可以在\ `这里 <http://seisman.qiniudn.com/downloads/RESP.IU.COLA.00.BHZ>`_\ 下载。

RESP文件是从SEED文件中解压得到的，因而保留了SEED格式的很多传统。响应文件中Stage sequence number表示阶段号，这个例子中从1到3再到0；在每个stage中，根据SEED格式的要求又分为多个block，每个block分别代表该stage的部分信息。

台站信息
========

- 1-9行包含了台站名、台网名、location、channel、开始时间和结束时间等信息。

Stage 1
========

10-42行给出了第一阶段的信息。这个阶段的功能是将运动信号转换为电压信号。

- 10-33行。输入单位为m/s，输出单位为V，归一化因子\ :math:`A_0=86270.5`\ ，共有2个零点和5个极点，然后列出了零极点的实部、虚部以及误差。
- 34-42行给出了第一阶段的放大系数\ :math:`Sd=2.013040e+03`\ 。

Stage 2
=======

43-73行是第二个阶段，其实现模拟信号到数字信号的转换。

- 43-53行指出输入为V，输出为counts
- 54-64行给出了模电转换过程中可能存在的减采样信息，这里减采样因子为1，也就是没有减采样。
- 65-73行给出了该阶段的放大系数\ :math:`S_d= 1.677720E+06`\ 。

Stage 3
========

74-173行是第三阶段，主要是滤波、减采样等。

- 74-153行指出输入为counts，输出也为counts。这个阶段的响应函数不是通过零极点的方式给出的，而是通过系数给出的，这里包含了67个分子系数和0个分母系数。
- 154-164行给出了减采样的信息，并对滤波过程中造成的时间延迟进行估计并做校正。
- 165-173给出这个阶段的增益，一般为1.

Stage 0
=======

174-182行是第0阶段，这个阶段给出了Sensitivity=3.377320E+09。其实际上等于前面三个阶段的放大系数\ :math:`S_d`\ 的乘积，这个阶段只是起到了辅助验证的作用。

仪器响应与各个阶段的振幅响应
============================

.. figure:: /images/2013062701.png
   :alt: 仪器响应与各阶段振幅响应

   图1：仪器响应与各阶段振幅响应

这里主要关注振幅响应，根据图例可以看出，第一个阶段在0.01-5Hz范围内振幅基本相同，在该范围外振幅响应比较小，这是该仪器所关注的部分；第二阶段的响应函数是完美的直线；第三个阶段在一个很长的范围内也是一条直线，在大于7Hz的时候振幅响应开始出现剧烈的变化。理论上在去除仪器响应的时候需要考虑第三阶段的响应函数，但是实际上在我们所关注的频率范围内（也许是0.01-5Hz），因而第三阶段的响应函数也可以不考虑了。

总结
====

与前文总结相同，三个阶段中最重要的是第一个阶段的零极点，还有三个阶段的放大系数。第一个阶段的归一化因子也很重要，在这里好像没有体现出来。

备注
====

- 图1由\ `JPlotResp <http://www.isti2.com/JPlotResp/>`_\c绘制得到。
- 使用JPlotResp绘制响应函数的时候，将光标放在相应点上，可以看到每个点的横纵轴坐标，在最大振幅以及敏感频率方面与想象的有一点偏差。
